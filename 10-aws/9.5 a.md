Here is **Q148** in your required interview format.

---

# **148. Have you used AWS EFS? If yes, what issues did you run into?**

### **Short Explanation**

Tests your hands-on experience with shared storage and real troubleshooting scenarios.

---

# **Answer**

Yes, I’ve used EFS mainly with **EKS, EC2, and Lambda** for shared storage.
Common issues include **mounting failures, throughput limits, high latency, incorrect security groups, and incorrect access points**.

---

# **Detailed Explanation**

Below are the most common real-world EFS issues DevOps engineers face:

---

## **1. Mounting Issues (Most Common)**

### **Symptoms:**

* `mount.nfs: access denied`
* `connection timed out`
* Pod stuck in `ContainerCreating`

### **Root Causes:**

* Security group of EC2/EKS node not allowing **NFS port 2049**
* Incorrect EFS mount target in that AZ
* No mount target in that availability zone

### **Fix:**

* Allow inbound **2049** between EFS SG ↔ Node SG
* Ensure EFS has mount targets in **all** AZs

---

## **2. Performance / Throughput Issues**

EFS performance is based on **size** + **Burst Credits**.

### Problems:

* High latency
* Slow reads/writes
* Pods timing out

### Fix:

* Switch to **Provisioned Throughput Mode**
* Enable **Max I/O** for higher concurrency

---

## **3. Access Point Misconfigurations**

### Issues:

* Wrong UID/GID
* Wrong directory permissions
* Lambda/EKS unable to write files

### Fix:

Configure proper:

```
POSIX permissions  
UID/GID  
Root directory path
```

---

## **4. Cross-AZ Access Problems**

If EC2 in AZ "a" tries to mount EFS through AZ "b", performance drops.

Fix:

* Ensure mount target exists in the same AZ
* Ensure correct DNS resolver

---

## **5. Costs & Unexpected Bills**

EFS Standard can be expensive.

Fix:

* Use **EFS - One Zone** for non-critical workloads
* Enable **lifecycle policy** to EFS IA

---

## **6. EKS-Specific EFS CSI Driver Issues**

Common:

* CSI driver misconfigured
* IAM role for service account missing
* PVC stuck in Pending

Fix:

* Ensure **IRSA** IAM policies are attached
* Correct StorageClass configuration

---

# **Summary Table**

| Issue             | Reason                   | Fix                      |
| ----------------- | ------------------------ | ------------------------ |
| Mount failure     | SG/Port 2049 blocked     | Allow NFS 2049           |
| High latency      | Low throughput           | Provisioned throughput   |
| Permission errors | Wrong POSIX permissions  | Correct UID/GID          |
| PVC Pending       | CSI driver misconfigured | Fix IRSA + SC            |
| High cost         | Using Standard           | Switch to One Zone or IA |

---

# **Key Takeaway**

**Most EFS issues come from security groups or missing mount targets — always check NFS port 2049 and per-AZ mount targets first.**

---

Ready for **149. When will you go for EFS over EBS in real-time?**
