
### **137. How to enable Internet access to the application deployed in a private subnet?**

**Short Explanation:**
This question checks if you understand **how private subnets communicate with the Internet** while maintaining **security and isolation** — a key AWS networking concept.

---

**Answer:**
To enable Internet access for instances in a **private subnet**, you must create a **NAT Gateway (or NAT Instance)** in a **public subnet** and update the **private subnet’s route table** to send Internet-bound traffic (`0.0.0.0/0`) to the **NAT**.

---

**Detailed Explanation:**

Instances in a **private subnet**:

* **Cannot** directly access the Internet (no Internet Gateway route).
* Are used for backend apps, databases, or internal microservices.

However, sometimes these instances need outbound Internet access — for updates, patches, API calls, etc.
To allow this **securely**, you use **NAT (Network Address Translation)**.

---

#### **Step-by-Step Setup:**

1. **Create a VPC**

   * Example CIDR: `10.0.0.0/16`

2. **Create Two Subnets**

   * Public Subnet: `10.0.1.0/24`
   * Private Subnet: `10.0.2.0/24`

3. **Attach an Internet Gateway (IGW)**

   * Attach it to the VPC.
   * Update the **public subnet route table**:

     ```
     Destination: 0.0.0.0/0 → Target: igw-xxxxxx
     ```

4. **Create a NAT Gateway**

   * Place it in the **public subnet**.
   * Associate it with an **Elastic IP (EIP)**.

5. **Update the Private Subnet Route Table**

   * Add route:

     ```
     Destination: 0.0.0.0/0 → Target: nat-xxxxxx
     ```
   * This tells private instances to send outbound traffic via the NAT Gateway.

6. **Test the Setup**

   * SSH into the instance using a **bastion host** (in public subnet).
   * Try to `ping 8.8.8.8` or run `yum update` — it should work.

---

#### **Traffic Flow Example:**

```
Private EC2 (10.0.2.x)
   ↓
Private Route Table → NAT Gateway (in Public Subnet)
   ↓
Internet Gateway (IGW)
   ↓
Internet
```

Inbound Internet traffic **cannot** reach the private EC2 directly because there’s **no inbound route from IGW** — ensuring **security**.

---

**Summary Table:**

| Component        | Purpose                                         |
| ---------------- | ----------------------------------------------- |
| Internet Gateway | Enables public subnet Internet access           |
| NAT Gateway      | Allows private subnet outbound Internet traffic |
| Public Subnet    | Hosts NAT Gateway                               |
| Private Subnet   | Hosts internal app servers                      |
| Route Table      | Defines routing path via NAT Gateway            |

---

**Key Takeaway:**
Use a **NAT Gateway in a public subnet** + **proper route tables** to give **secure Internet access** to instances in **private subnets** — no direct exposure to the Internet.

---

Continue with **Question 138 (Can applications in different subnets of a VPC interact by default? If no, why?)** next?
