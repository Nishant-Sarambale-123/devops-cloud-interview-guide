Great — here is the next one.

---

# **157. Application on EC2 is slow. What will you check?**

## **Short Explanation:**

Tests your ability to debug **performance issues** on EC2 (CPU, memory, disk, network, app-level).

---

## **Answer:**

Check **CPU**, **memory**, **disk I/O**, **network latency**, **application logs**, **database latency**, and **load balancer health checks**.

---

## **Detailed Explanation**

### **1. Check EC2 System Metrics (CloudWatch)**

Look for:

* **High CPU Utilization**
* **Low free RAM / swapping**
* **High disk read/write latency**
* **Network in/out spikes**

CloudWatch metrics to check:

```
CPUUtilization
DiskReadOps
DiskWriteOps
NetworkIn
NetworkOut
StatusCheckFailed
```

---

### **2. OS-Level Diagnosis**

#### **Linux**

```
top
htop
free -m
iostat -xm 5
vmstat 1
df -h
dmesg | tail
```

#### **Windows**

* Task Manager → CPU, RAM
* Resource Monitor → Disk IOPS
* Event Viewer → Errors

---

### **3. Check Application Logs**

Examples of issues:

* Memory leaks
* Too many requests
* Thread pool full
* Database connection leaks
* Slow API calls

---

### **4. Check Database Bottlenecks**

Most performance issues are DB-related.

Look for:

* Slow queries
* High DB CPU
* IOPS limit reached
* Connections maxed out

Tools:

* RDS Performance Insights
* Slow query logs

---

### **5. Check Load Balancer (If behind ALB/NLB)**

Look for:

* High target response time
* Increase in 5XX errors
* Unhealthy targets

Metrics:

```
TargetResponseTime
HTTPCode_ELB_5XX
TargetConnectionErrorCount
```

---

### **6. Check Auto Scaling**

If traffic increased suddenly → EC2 may be overloaded.

Fix:

* Increase ASG desired count
* Adjust scaling policy
* Move to larger instance type

---

### **7. Check EBS Volume Performance**

If using GP2 → may be throttled.

Check:

* Volume queue length
* Burst balance

Fix:

* Upgrade to GP3
* Increase IOPS

---

### **8. Check Network Issues**

* Latency to database
* DNS resolution delay
* Security groups blocking some calls

---

### **9. Application-Level Profiling**

For Java apps:

* Thread dumps
* Heap dump
* Garbage collection logs
* Increase JVM heap size

For Python/Node apps:

* Check async blocking
* Check max worker threads

---

### **10. Hidden Reason: Disk Full**

If `/` or `/var` is full → app slows or crashes.

Check:

```
df -h
du -sh /*
```

---

## **Summary Table**

| Issue            | How to Check     | Fix                            |
| ---------------- | ---------------- | ------------------------------ |
| High CPU         | CloudWatch, top  | Resize instance / scale out    |
| Low memory       | free -m          | Increase RAM / fix memory leak |
| Disk I/O         | iostat           | Move to GP3 / io2              |
| DB slow          | RDS insights     | Optimize queries               |
| App bugs         | App logs         | Fix code / increase threads    |
| Network latency  | ping, traceroute | Check SG/VPC                   |
| ASG under-scaled | ASG metrics      | Update scaling rules           |

---

## **Key Takeaway:**

**80% of slow EC2 issues come from CPU, RAM, disk I/O, or database bottlenecks — always check these first.**

---

Ready for **158. Have you worked with Lambda in AWS? Explain your activities with Lambda.**
